[workspace]
members = ["dispplay", "simpp"]

[package]
name = "crofiler"
version = "0.1.0"
edition = "2021"

[features]
# Display statistics on the usage of the C++ entity interners
#
# This can be used during development to adjust interner key sizes based on
# real-world workloads.
#
unstable_interner_stats = []

[dependencies]
# Used to explain what happened in crashes -> better debugging...
# TODO: Switch to std's Backtrace once rust 1.65 is old enough
backtrace = "0.3"

# Used to format ISO dates from clang Unix timestamps
chrono = "0.4"

# Used to decode clang output
clang-time-trace = { path = "clang-time-trace" }

# Used for CLI options
clap = { version = "3.2", features = ["derive"] }

# Used to measure and process full-build profiles
cmakeperf = { path = "cmakeperf" }

# Used for TUI display
cursive = { version = "0.20", default-features = false, features = ["termion-backend"] }
cursive_table_view = "0.14"

# Saner floats, used to simplify TUI code
decorum = "0.3"

# Used for logging in stdio mode
env_logger = "0.9"

# Used for logging
log = "0.4"

# Used for lazy stuff: path separator, test trace...
once_cell = "1.10"

# Used for logging in TUI mode
syslog = "6.0"

# Used for low-level terminal interaction, mostly TTY detection & teminal size
termion = "1.5"

# Used for typesetting hierarchical profiles in stdio mode
termtree = "0.4"

# Used to simplify error handling
thiserror = "1.0"

# Used to find appropriate points for cutting Unicode strings
unicode-segmentation = "1.9"

# Used to evaluate terminal width of strings
unicode-width = "0.1"

# Used for cancellable wait on worker processes
wait-timeout = "0.2"

[dev-dependencies]
# Used to simplify tests
assert_matches = "1.5"

[profile.release]
debug = 1  # Needed for profiling

[profile.bench]
debug = 1  # Needed for profiling
codegen-units = 1  # Needed for inlining decision determinism